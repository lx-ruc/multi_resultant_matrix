import numpy as np
import sympy

file_path = '/Users/lixin/sjm/multi_resultant_matrix/214var.log'

x1 = sympy.symbols('x1')
x2 = sympy.symbols('x2')
x3 = sympy.symbols('x3')
x4 = sympy.symbols('x4')
x5 = sympy.symbols('x5')
x6 = sympy.symbols('x6')
x7 = sympy.symbols('x7')
x8 = sympy.symbols('x8')
x9 = sympy.symbols('x9')
x10 = sympy.symbols('x10')
x11 = sympy.symbols('x11')
x12 = sympy.symbols('x12')
x13 = sympy.symbols('x13')
x14 = sympy.symbols('x14')
x15 = sympy.symbols('x15')
x16 = sympy.symbols('x16')
x17 = sympy.symbols('x17')
x18 = sympy.symbols('x18')
x19 = sympy.symbols('x19')
x20 = sympy.symbols('x20')
x21 = sympy.symbols('x21')
x22 = sympy.symbols('x22')
x23 = sympy.symbols('x23')
x24 = sympy.symbols('x24')
x25 = sympy.symbols('x25')
x26 = sympy.symbols('x26')
x27 = sympy.symbols('x27')
x28 = sympy.symbols('x28')
x29 = sympy.symbols('x29')
x30 = sympy.symbols('x30')
x31 = sympy.symbols('x31')
x32 = sympy.symbols('x32')
x33 = sympy.symbols('x33')
x34 = sympy.symbols('x34')
x35 = sympy.symbols('x35')
x36 = sympy.symbols('x36')
x37 = sympy.symbols('x37')
x38 = sympy.symbols('x38')
x39 = sympy.symbols('x39')
x40 = sympy.symbols('x40')
x41 = sympy.symbols('x41')
x42 = sympy.symbols('x42')
x43 = sympy.symbols('x43')
x44 = sympy.symbols('x44')
x45 = sympy.symbols('x45')
x46 = sympy.symbols('x46')
x47 = sympy.symbols('x47')
x48 = sympy.symbols('x48')
x49 = sympy.symbols('x49')
x50 = sympy.symbols('x50')
x51 = sympy.symbols('x51')
x52 = sympy.symbols('x52')
x53 = sympy.symbols('x53')
x54 = sympy.symbols('x54')
x55 = sympy.symbols('x55')
x56 = sympy.symbols('x56')
x57 = sympy.symbols('x57')
x58 = sympy.symbols('x58')
x59 = sympy.symbols('x59')
x60 = sympy.symbols('x60')
x61 = sympy.symbols('x61')
x62 = sympy.symbols('x62')
x63 = sympy.symbols('x63')
x64 = sympy.symbols('x64')
x65 = sympy.symbols('x65')
x66 = sympy.symbols('x66')
x67 = sympy.symbols('x67')
x68 = sympy.symbols('x68')
x69 = sympy.symbols('x69')
x70 = sympy.symbols('x70')
x71 = sympy.symbols('x71')
x72 = sympy.symbols('x72')
x73 = sympy.symbols('x73')
x74 = sympy.symbols('x74')
x75 = sympy.symbols('x75')
x76 = sympy.symbols('x76')
x77 = sympy.symbols('x77')
x78 = sympy.symbols('x78')
x79 = sympy.symbols('x79')
x80 = sympy.symbols('x80')
x81 = sympy.symbols('x81')
x82 = sympy.symbols('x82')
x83 = sympy.symbols('x83')
x84 = sympy.symbols('x84')
x85 = sympy.symbols('x85')
x86 = sympy.symbols('x86')
x87 = sympy.symbols('x87')
x88 = sympy.symbols('x88')
x89 = sympy.symbols('x89')
x90 = sympy.symbols('x90')
x91 = sympy.symbols('x91')
x92 = sympy.symbols('x92')
x93 = sympy.symbols('x93')
x94 = sympy.symbols('x94')
x95 = sympy.symbols('x95')
x96 = sympy.symbols('x96')
x97 = sympy.symbols('x97')
x98 = sympy.symbols('x98')
x99 = sympy.symbols('x99')
x100 = sympy.symbols('x100')
x101 = sympy.symbols('x101')
x102 = sympy.symbols('x102')
x103 = sympy.symbols('x103')
x104 = sympy.symbols('x104')
x105 = sympy.symbols('x105')
x106 = sympy.symbols('x106')
x107 = sympy.symbols('x107')
x108 = sympy.symbols('x108')
x109 = sympy.symbols('x109')
x110 = sympy.symbols('x110')
x111 = sympy.symbols('x111')
x112 = sympy.symbols('x112')
x113 = sympy.symbols('x113')
x114 = sympy.symbols('x114')
x115 = sympy.symbols('x115')
x116 = sympy.symbols('x116')
x117 = sympy.symbols('x117')
x118 = sympy.symbols('x118')
x119 = sympy.symbols('x119')
x120 = sympy.symbols('x120')
x121 = sympy.symbols('x121')
x122 = sympy.symbols('x122')
x123 = sympy.symbols('x123')
x124 = sympy.symbols('x124')
x125 = sympy.symbols('x125')
x126 = sympy.symbols('x126')
x127 = sympy.symbols('x127')
x128 = sympy.symbols('x128')
x129 = sympy.symbols('x129')
x130 = sympy.symbols('x130')
x131 = sympy.symbols('x131')
x132 = sympy.symbols('x132')
x133 = sympy.symbols('x133')
x134 = sympy.symbols('x134')
x135 = sympy.symbols('x135')
x136 = sympy.symbols('x136')
x137 = sympy.symbols('x137')
x138 = sympy.symbols('x138')
x139 = sympy.symbols('x139')
x140 = sympy.symbols('x140')
x141 = sympy.symbols('x141')
x142 = sympy.symbols('x142')
x143 = sympy.symbols('x143')
x144 = sympy.symbols('x144')
x145 = sympy.symbols('x145')
x146 = sympy.symbols('x146')
x147 = sympy.symbols('x147')
x148 = sympy.symbols('x148')
x149 = sympy.symbols('x149')
x150 = sympy.symbols('x150')
x151 = sympy.symbols('x151')
x152 = sympy.symbols('x152')
x153 = sympy.symbols('x153')
x154 = sympy.symbols('x154')
x155 = sympy.symbols('x155')
x156 = sympy.symbols('x156')
x157 = sympy.symbols('x157')
x158 = sympy.symbols('x158')
x159 = sympy.symbols('x159')
x160 = sympy.symbols('x160')
x161 = sympy.symbols('x161')
x162 = sympy.symbols('x162')
x163 = sympy.symbols('x163')
x164 = sympy.symbols('x164')
x165 = sympy.symbols('x165')
x166 = sympy.symbols('x166')
x167 = sympy.symbols('x167')
x168 = sympy.symbols('x168')
x169 = sympy.symbols('x169')
x170 = sympy.symbols('x170')
x171 = sympy.symbols('x171')
x172 = sympy.symbols('x172')
x173 = sympy.symbols('x173')
x174 = sympy.symbols('x174')
x175 = sympy.symbols('x175')
x176 = sympy.symbols('x176')
x177 = sympy.symbols('x177')
x178 = sympy.symbols('x178')
x179 = sympy.symbols('x179')
x180 = sympy.symbols('x180')
x181 = sympy.symbols('x181')
x182 = sympy.symbols('x182')
x183 = sympy.symbols('x183')
x184 = sympy.symbols('x184')
x185 = sympy.symbols('x185')
x186 = sympy.symbols('x186')
x187 = sympy.symbols('x187')
x188 = sympy.symbols('x188')
x189 = sympy.symbols('x189')
x190 = sympy.symbols('x190')
x191 = sympy.symbols('x191')
x192 = sympy.symbols('x192')
x193 = sympy.symbols('x193')
x194 = sympy.symbols('x194')
x195 = sympy.symbols('x195')
x196 = sympy.symbols('x196')
x197 = sympy.symbols('x197')
x198 = sympy.symbols('x198')
x199 = sympy.symbols('x199')
x200 = sympy.symbols('x200')
x201 = sympy.symbols('x201')
x202 = sympy.symbols('x202')
x203 = sympy.symbols('x203')
x204 = sympy.symbols('x204')
x205 = sympy.symbols('x205')
x206 = sympy.symbols('x206')
x207 = sympy.symbols('x207')
x208 = sympy.symbols('x208')
x209 = sympy.symbols('x209')
x210 = sympy.symbols('x210')
x211 = sympy.symbols('x211')
x212 = sympy.symbols('x212')
x213 = sympy.symbols('x213')
x214 = sympy.symbols('x214')


def get_report(all_var_eig_list,mutation):
    var_mutation_list = list()
    for term in all_var_eig_list:
        variable = term[0]
        val_eig = term[1]
        mut = False
        val_eig = [e for e in reversed(val_eig)]
        for i in range(len(val_eig)-1):
            # 相邻位置检测距离1最近的特征值突变，存入四元组（当前变量，突变处当前变量取值、突变处特征值，突变后一位置处特征值）
            if val_eig[i][1] / val_eig[i+1][1] <= mutation:
                var_mutation_list.append((variable,val_eig[i][0],val_eig[i+1][1],val_eig[i][1]))
                mut = True
                break
        if mut == False:
            var_mutation_list.append((variable,0,0,0))  
    return var_mutation_list


all_var_eig_list = list()
# 打开文件以逐行读取
with open(file_path, 'r') as file:
    for line in file:
        line = eval(line)
        all_var_eig_list.append(line)
mutation = 1e-1
var_mutation_list = get_report(all_var_eig_list=all_var_eig_list,mutation=mutation)
print(var_mutation_list)
for term in var_mutation_list:
    print(term)
